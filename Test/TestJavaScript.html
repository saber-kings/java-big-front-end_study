<!DOCTYPE html>
<html>
	<head> 
		<meta charset="utf-8"> 
		<title>质数求和</title> 
	</head>
	<body>

		<p>求质数之和： <output id="result"></output></p>
		<button onclick="startWorker()">开始工作</button>
		<button onclick="stopWorker()">停止工作</button>
		<input type="number" id="num" value="10000" placeholder="请输入质数求和的最大范围"/>

		<p><strong>注意：</strong> Internet Explorer 9 及更早 IE 版本浏览器不支持 Web Workers.必须放在服务器上打开，WebWorks才能生效 </p>

		<script>
			var w;

			function startWorker() {
				if (typeof(Worker) !== "undefined") {
					if (typeof(w) == "undefined") {
						w = new Worker("js/web_works.js");
						var num = document.getElementById("num").value;
						if (num!=null&&num!=="") {
							w.postMessage(Number(num));
						} else{
							alert("请输入值");
						}
					}
					w.onmessage = function(event) {
						document.getElementById("result").innerHTML = event.data;
					};
				} else {
					document.getElementById("result").innerHTML = "抱歉，你的浏览器不支持 Web Workers...";
				}
			}

			function stopWorker() {
				w.terminate();
				w = undefined;
			}
		</script>

	</body>
</html>
