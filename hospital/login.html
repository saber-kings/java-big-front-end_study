<!DOCTYPE html>
<html>
<head>
<title>CSS3动态背景登录页面</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
<link href="css/style1.css" rel="stylesheet" type="text/css" media="all" />
<script src="js/vue.js"></script>
<script src="js/axios.min.js"></script>
</head>
<body>

	<!-- main -->
	<div class="main-w3layouts wrapper" id="l1">
		<div class="main-agileinfo">
			<div class="agileits-top"> 
				
					<input class="text" type="text" name="Username" placeholder="账号" required="" v-model="un">
					<input class="text" type="password" name="password" placeholder="密码" required="" v-model="up">
					<div class="wthree-text"> 
						
						<div class="clear"> </div>
					</div>   
					<input type="button" value="登录" @click="dl();">
				
				
			</div>	 
		</div>	
		
		<!-- //copyright -->
		<ul class="w3lsg-bubbles">
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
		</ul>
	</div>	
	<!-- //main --> 
	<script>
		var app1=new Vue({
			el:"#l1",
			data:{
				un:"",
				up:""
			},
			methods:{
				dl:function(){
					if(this.un==""){
						alert("请输入账号");
					}else if(this.up==""){
						alert("请输入密码");
					}else{
						
						axios.get("login?un="+this.un+"&up="+this.up)
						  .then((res) => {
							  if(res.data.msg=="error"){
								  alert("账号密码错误");
							  }else{
								  var u1=res.data[0];
								  //alert(u1.realname);
								  window.localStorage.setItem("uid",u1.id);
								  window.localStorage.setItem("realname",u1.realname);
								  alert("登录成功");
								  window.location.href="index.html";
							  }
							//console.log(response.data);//请求的返回体
						  })
						  .catch((error) => {
							console.log(error);//异常
						  });
					}
				}
			}
		});
	</script>
</body>
</html>
